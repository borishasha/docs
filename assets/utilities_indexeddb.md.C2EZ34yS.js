import{_ as a,c as i,o as e,aG as n}from"./chunks/framework.CrOSaJJH.js";const g=JSON.parse('{"title":"IndexedDB 유틸리티","description":"","frontmatter":{},"headers":[],"relativePath":"utilities/indexeddb.md","filePath":"utilities/indexeddb.md"}'),t={name:"utilities/indexeddb.md"};function l(h,s,p,d,k,r){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="indexeddb-유틸리티" tabindex="-1">IndexedDB 유틸리티 <a class="header-anchor" href="#indexeddb-유틸리티" aria-label="Permalink to &quot;IndexedDB 유틸리티&quot;">​</a></h1><h2 id="개요" tabindex="-1">개요 <a class="header-anchor" href="#개요" aria-label="Permalink to &quot;개요&quot;">​</a></h2><p>IndexedDB를 사용하여 대용량 데이터를 브라우저에 저장하는 유틸리티입니다.</p><h2 id="파일-위치" tabindex="-1">파일 위치 <a class="header-anchor" href="#파일-위치" aria-label="Permalink to &quot;파일 위치&quot;">​</a></h2><p><code>src/utils/indexedDbUtil.js</code></p><h2 id="주요-함수" tabindex="-1">주요 함수 <a class="header-anchor" href="#주요-함수" aria-label="Permalink to &quot;주요 함수&quot;">​</a></h2><h3 id="savetoindexeddb-key-value" tabindex="-1">saveToIndexedDB(key, value) <a class="header-anchor" href="#savetoindexeddb-key-value" aria-label="Permalink to &quot;saveToIndexedDB(key, value)&quot;">​</a></h3><p>데이터를 IndexedDB에 저장합니다.</p><p><strong>파라미터:</strong></p><ul><li><code>key</code> (string): 저장 키</li><li><code>value</code> (any): 저장할 데이터</li></ul><p><strong>사용 예제:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { idbUtil } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/utils/indexedDbUtil.js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">saveToIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idbUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveToIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pageData&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  formData: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 데이터 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gridData: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 데이터 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="loadfromindexeddb-key" tabindex="-1">loadFromIndexedDB(key) <a class="header-anchor" href="#loadfromindexeddb-key" aria-label="Permalink to &quot;loadFromIndexedDB(key)&quot;">​</a></h3><p>IndexedDB에서 데이터를 불러옵니다.</p><p><strong>파라미터:</strong></p><ul><li><code>key</code> (string): 불러올 키</li></ul><p><strong>반환값:</strong></p><ul><li>저장된 데이터</li></ul><p><strong>사용 예제:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">loadFromIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idbUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadFromIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pageData&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="getkeyindexeddb" tabindex="-1">getKeyIndexedDB() <a class="header-anchor" href="#getkeyindexeddb" aria-label="Permalink to &quot;getKeyIndexedDB()&quot;">​</a></h3><p>모든 키를 가져옵니다.</p><p><strong>반환값:</strong></p><ul><li>키 배열</li></ul><h3 id="removekeyindexeddb-key" tabindex="-1">removeKeyIndexedDB(key) <a class="header-anchor" href="#removekeyindexeddb-key" aria-label="Permalink to &quot;removeKeyIndexedDB(key)&quot;">​</a></h3><p>특정 키를 삭제합니다.</p><p><strong>파라미터:</strong></p><ul><li><code>key</code> (string): 삭제할 키</li></ul><h3 id="removeallkeyindexeddb" tabindex="-1">removeAllKeyIndexedDB() <a class="header-anchor" href="#removeallkeyindexeddb" aria-label="Permalink to &quot;removeAllKeyIndexedDB()&quot;">​</a></h3><p>모든 데이터를 삭제합니다.</p><h3 id="getpagedata-pagedata-callback" tabindex="-1">getPageData(pageData, callback) <a class="header-anchor" href="#getpagedata-pagedata-callback" aria-label="Permalink to &quot;getPageData(pageData, callback)&quot;">​</a></h3><p>페이지 데이터를 불러오고, 없으면 콜백을 실행합니다.</p><p><strong>파라미터:</strong></p><ul><li><code>pageData</code> (object): 페이지 데이터 객체</li><li><code>callback</code> (function): 데이터가 없을 때 실행할 함수</li></ul><p><strong>사용 예제:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getPageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idbUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pageData, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 초기 데이터 로드</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadInitialData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="데이터-압축" tabindex="-1">데이터 압축 <a class="header-anchor" href="#데이터-압축" aria-label="Permalink to &quot;데이터 압축&quot;">​</a></h2><p>데이터는 LZString을 사용하여 압축되어 저장됩니다:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> compressValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LZString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compressToUTF16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value))</span></span></code></pre></div><h2 id="탭-스토어-연동" tabindex="-1">탭 스토어 연동 <a class="header-anchor" href="#탭-스토어-연동" aria-label="Permalink to &quot;탭 스토어 연동&quot;">​</a></h2><p>탭 데이터는 IndexedDB에 자동으로 저장됩니다:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tabStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useTabStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pageId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tabStore.nowTab</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 페이지 데이터 저장</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveToIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pageId, pageData)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 페이지 데이터 불러오기</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> savedData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadFromIndexedDB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pageId)</span></span></code></pre></div><h2 id="주의사항" tabindex="-1">주의사항 <a class="header-anchor" href="#주의사항" aria-label="Permalink to &quot;주의사항&quot;">​</a></h2><ol><li><strong>용량 제한</strong>: IndexedDB는 브라우저별로 용량 제한이 있습니다.</li><li><strong>비동기 처리</strong>: 모든 함수는 비동기이므로 await를 사용하세요.</li><li><strong>에러 처리</strong>: try-catch로 에러를 처리하세요.</li></ol><h2 id="관련-문서" tabindex="-1">관련 문서 <a class="header-anchor" href="#관련-문서" aria-label="Permalink to &quot;관련 문서&quot;">​</a></h2><ul><li><a href="./../core-features/stores/tab.html">탭 스토어</a></li></ul>`,46)]))}const c=a(t,[["render",l]]);export{g as __pageData,c as default};
