import{_ as i,c as a,o as n,aG as t}from"./chunks/framework.DytOxJW6.js";const g=JSON.parse('{"title":"보안 기능","description":"","frontmatter":{},"headers":[],"relativePath":"backend/common-features/security.md","filePath":"backend/common-features/security.md"}'),l={name:"backend/common-features/security.md"};function h(e,s,p,k,r,E){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="보안-기능" tabindex="-1">보안 기능 <a class="header-anchor" href="#보안-기능" aria-label="Permalink to &quot;보안 기능&quot;">​</a></h1><p>AxpFramework에서 제공하는 보안 관련 기능을 설명합니다.</p><h2 id="개요" tabindex="-1">개요 <a class="header-anchor" href="#개요" aria-label="Permalink to &quot;개요&quot;">​</a></h2><p>AxpFramework는 다양한 보안 기능을 제공하여 애플리케이션의 보안을 강화합니다.</p><p><strong>주요 기능:</strong></p><ul><li>암호화/복호화 (AES-128, RSA)</li><li>XSS 방지</li><li>JWT 인증</li><li>Spring Security 통합</li></ul><h2 id="암호화-유틸리티" tabindex="-1">암호화 유틸리티 <a class="header-anchor" href="#암호화-유틸리티" aria-label="Permalink to &quot;암호화 유틸리티&quot;">​</a></h2><h3 id="aes-128" tabindex="-1">AES-128 <a class="header-anchor" href="#aes-128" aria-label="Permalink to &quot;AES-128&quot;">​</a></h3><p>대칭키 암호화 알고리즘입니다.</p><p><strong>사용 예시:</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommAES128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommAES128 aes128;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 암호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String encrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aes128.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;평문 데이터&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 복호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String decrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aes128.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(encrypted);</span></span></code></pre></div><p><strong>용도:</strong></p><ul><li>개인정보 암호화 (주민등록번호, 전화번호 등)</li><li>리포트 생성 시 복호화</li><li>데이터베이스 저장 시 암호화</li></ul><h3 id="rsa" tabindex="-1">RSA <a class="header-anchor" href="#rsa" aria-label="Permalink to &quot;RSA&quot;">​</a></h3><p>공개키 암호화 알고리즘입니다.</p><p><strong>사용 예시:</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommRsa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommRsa rsa;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 암호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String encrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rsa.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;평문 데이터&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 복호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String decrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rsa.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(encrypted);</span></span></code></pre></div><p><strong>설정:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">rsa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCmI2Rk09DaXKzBR3GkbK+33Ye7QZEXx3QfZnMcO7yJOnv3BCO5HYv7fFwqt9Wctu+ZTiuyI3Oqi+PF65/0Y9AdambuWMj2ot+xbm9ipLzIdUcdZGC1XLazMkf6IsepO/xr109e/JEHbFPYmO3Bc6yydl226shGX0H3/nq3uej2w2Z4LcjMaL4qFP9FWZx8nNvzxkHQ2we5les9phYdOtZijcqHvPvzTuPtuA4c+9pFOkjqsEzeck1La3KVlCXb2OFUZ3+dwJHU3pyp9suVNOWk80WVxgtxGJQAAnFfBFCmeOtrOeJ6aXLi8fxAKwdAElhSOIwwW6baAHfvH0Wz3jzdAgMBAAECggEAOZjehsgaSYHEkJNUtiTJ/IvsMQKnqx9GRlaNxLV/BPJGJNqGCfjQ3WR9TYADKfwP7822f2EkCfXKhwTLpP3vmisXuT0Fmt/XfltjeUbUfgiOmYWBs46Ldm+RnYnuP2Eg/0Abb7pPC0xGezp1ftI8Bnjbv30A5sjChZfvcn+c4ONIfA85ogchOL8aSWAqtuj1WmPAHs1fiCbailExuqMZ0mGLYs1g0e0W1zKUqVpWxKchF1rOUmtMAHy0Sqlw+XKSDS4nVxiLTMMxPKM1Jt8Io/nE4j5QmcAAaWExRuvkbokKrCjXAFVj4fIlwFUdxsgqi14yhxbVNLuIj9WtHEnSHwKBgQDlCw7b3dQy8rFQ4CwTaeEii0tIM7xeSwkSYx7BgNgeNcRlhbg6Kl2OVaLmryQhj9VOIFFWXbvK6FIiG0IoBVefit+IYUo8DBYXHsrOHE1eZmdvW2k2uroEAZXTFlcNMRxO3av/nkWr2ldJOEqk9hvc2xfqVEMMjNTqDDhCIqMwwwKBgQC5sQswRitzSqFgEgfrGSuvXW/r8iM/4QLMGNiC5LlWdA9T+p/M0WCaJab43KEC8ZMWq/kH3+AtSYUIZXqKjqQleDN12a1PSQRleolE8iUMRbO4HxfnlC7drZAb1EK0Qbwq61xJE0/EuFLzxIE8SnhylKUtUAcLfKjLEc+1QQIB3wKBgHL+wk8RaODLiMsaQgbdOfOmC/4MO577/WoF6gMtNVS1mg1+vag2bRJxXICFnpZbKLU49J1wIkEVs2b8WJLPW9b2WpSWhDbxuoWRKDGjdBTZRUVbl8+qoIoyYY7BwKMW7SeLlDeat1A5J2nToWaBSivwtGkqNR+v9ZYs3HIYAecRAoGADTqkvmqxW8RcXNjMAZ7IcvToLVoR0tI3/cxjWGftIFCiauw3CEN+a1z1WVN2kRwey4Wy9zGm6fML7D42jbp9zUGUAPhiFXzxOD2Tm/rYUtiAZkSo0lHHSPm9g44KtobcXf5ok7gxfaVYG4/LWT1A+YDHh8PkzJez+supDZO1DecCgYAaKjrJVqScBpXlQ3EHPv5qGyVWwhcSKl9FNkMMIFmJfkIYckWqFqQX/+44EDtCYUFCShoSPuhnre9IVTfmoHBWa/R6CbydFxPYuDHsgDiDI+BMZq0It6rB8NH26gw0CzyxpZxVpI6x3FRWZ/KAJtaLsY8Zewf18C9MXdRYhXlSXg==</span></span></code></pre></div><h3 id="해시-함수" tabindex="-1">해시 함수 <a class="header-anchor" href="#해시-함수" aria-label="Permalink to &quot;해시 함수&quot;">​</a></h3><h4 id="md5" tabindex="-1">MD5 <a class="header-anchor" href="#md5" aria-label="Permalink to &quot;MD5&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommMD5Util&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommMD5Util md5Util;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String hash </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> md5Util.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;입력 데이터&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="sha-256" tabindex="-1">SHA-256 <a class="header-anchor" href="#sha-256" aria-label="Permalink to &quot;SHA-256&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommSHA256Util&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommSHA256Util sha256Util;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String hash </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sha256Util.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;입력 데이터&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="xss-방지" tabindex="-1">XSS 방지 <a class="header-anchor" href="#xss-방지" aria-label="Permalink to &quot;XSS 방지&quot;">​</a></h2><h3 id="axpxssfilter" tabindex="-1">AxpXssFilter <a class="header-anchor" href="#axpxssfilter" aria-label="Permalink to &quot;AxpXssFilter&quot;">​</a></h3><p>모든 HTTP 요청에 대해 XSS 필터링을 자동으로 적용합니다.</p><p><strong>처리 내용:</strong></p><ul><li>URL 파라미터 XSS 필터링</li><li>요청 헤더 XSS 필터링</li><li>JSON 요청 본문 XSS 필터링</li><li>OWASP AntiSamy를 사용한 HTML 정화</li></ul><p><strong>설정:</strong></p><ul><li><code>AxpFilterConfig</code>에서 자동 등록</li><li>최우선 순위로 실행</li></ul><h3 id="axpxssutil" tabindex="-1">AxpXssUtil <a class="header-anchor" href="#axpxssutil" aria-label="Permalink to &quot;AxpXssUtil&quot;">​</a></h3><p>XSS 필터링 유틸리티입니다.</p><p><strong>사용 예시:</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String safeValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpXssUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stripXss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInput);</span></span></code></pre></div><h2 id="jwt-인증" tabindex="-1">JWT 인증 <a class="header-anchor" href="#jwt-인증" aria-label="Permalink to &quot;JWT 인증&quot;">​</a></h2><h3 id="axpcommauthservice" tabindex="-1">AxpCommAuthService <a class="header-anchor" href="#axpcommauthservice" aria-label="Permalink to &quot;AxpCommAuthService&quot;">​</a></h3><p>JWT 토큰 생성 및 검증 서비스입니다.</p><p><strong>주요 메서드:</strong></p><ul><li><code>createAccessToken(String userId)</code>: Access Token 생성</li><li><code>createRefreshToken(String userId)</code>: Refresh Token 생성</li><li><code>parseToken(String token)</code>: 토큰 파싱</li><li><code>isRefreshToken(String token)</code>: Refresh Token 여부 확인</li></ul><p><strong>사용 예시:</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommAuthService&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommAuthService authService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 토큰 생성</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String accessToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;USER001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String refreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;USER001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 토큰 검증</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Claims claims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(accessToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> claims.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSubject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="axpjwtauthenticationfilter" tabindex="-1">AxpJwtAuthenticationFilter <a class="header-anchor" href="#axpjwtauthenticationfilter" aria-label="Permalink to &quot;AxpJwtAuthenticationFilter&quot;">​</a></h3><p>JWT 토큰 인증 필터입니다.</p><p><strong>동작:</strong></p><ul><li>Authorization 헤더에서 Access Token 추출</li><li>토큰 검증</li><li>인증 정보를 SecurityContext에 설정</li></ul><h2 id="spring-security-통합" tabindex="-1">Spring Security 통합 <a class="header-anchor" href="#spring-security-통합" aria-label="Permalink to &quot;Spring Security 통합&quot;">​</a></h2><h3 id="axpsecurityconfig" tabindex="-1">AxpSecurityConfig <a class="header-anchor" href="#axpsecurityconfig" aria-label="Permalink to &quot;AxpSecurityConfig&quot;">​</a></h3><p>Spring Security 설정 클래스입니다.</p><p><strong>주요 기능:</strong></p><ul><li>CSRF 비활성화</li><li>인증 제외 URI 설정</li><li>JWT 인증 필터 등록</li><li>HTTP 보안 헤더 설정</li><li>예외 처리</li></ul><p><strong>보안 헤더:</strong></p><ul><li>Content-Security-Policy</li><li>X-Frame-Options: DENY</li><li>Referrer-Policy</li><li>Permissions-Policy</li><li>Strict-Transport-Security</li></ul><h2 id="복호화-필터" tabindex="-1">복호화 필터 <a class="header-anchor" href="#복호화-필터" aria-label="Permalink to &quot;복호화 필터&quot;">​</a></h2><h3 id="axpdecryptfilter" tabindex="-1">AxpDecryptFilter <a class="header-anchor" href="#axpdecryptfilter" aria-label="Permalink to &quot;AxpDecryptFilter&quot;">​</a></h3><p>암호화된 요청 데이터를 복호화하는 필터입니다.</p><p><strong>동작:</strong></p><ul><li>요청 본문의 암호화 여부 확인</li><li>세션 데이터의 <code>decrypt</code> 값 확인</li><li>암호화된 데이터 복호화</li><li>복호화된 데이터로 요청 래핑</li></ul><h2 id="보안-정책-파일" tabindex="-1">보안 정책 파일 <a class="header-anchor" href="#보안-정책-파일" aria-label="Permalink to &quot;보안 정책 파일&quot;">​</a></h2><h3 id="antisamy-policy-xml" tabindex="-1">antisamy-policy.xml <a class="header-anchor" href="#antisamy-policy-xml" aria-label="Permalink to &quot;antisamy-policy.xml&quot;">​</a></h3><p>OWASP AntiSamy 정책 파일입니다.</p><p><strong>위치:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/main/resources/antisamy-policy.xml</span></span></code></pre></div><p><strong>내용:</strong></p><ul><li>허용된 HTML 태그 및 속성 정의</li><li>XSS 공격 패턴 차단 규칙</li></ul><h2 id="사용-예시" tabindex="-1">사용 예시 <a class="header-anchor" href="#사용-예시" aria-label="Permalink to &quot;사용 예시&quot;">​</a></h2><h3 id="개인정보-암호화" tabindex="-1">개인정보 암호화 <a class="header-anchor" href="#개인정보-암호화" aria-label="Permalink to &quot;개인정보 암호화&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AxpCommAES128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AxpCommAES128 aes128;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 주민등록번호 암호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String socialNum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socialNum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String encrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aes128.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(socialNum);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socialNum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, encrypted);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // DB 저장</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // DB 조회</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 주민등록번호 복호화</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String encrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socialNum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String decrypted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aes128.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(encrypted);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socialNum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, decrypted);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="리포트-생성-시-복호화" tabindex="-1">리포트 생성 시 복호화 <a class="header-anchor" href="#리포트-생성-시-복호화" aria-label="Permalink to &quot;리포트 생성 시 복호화&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">POST </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">direct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">report</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pdfView</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;jr_report&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;REPORT_TEMPLATE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;procedure&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;P_REPORT_DATA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;params&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ... },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;decrypt_column&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;cv_1:social_num|cv_3:emp_name&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="주의사항" tabindex="-1">주의사항 <a class="header-anchor" href="#주의사항" aria-label="Permalink to &quot;주의사항&quot;">​</a></h2><ol><li><strong>암호화 키 보안</strong>: 암호화 키는 설정 파일에 저장하며, Git에 커밋하지 않도록 주의</li><li><strong>XSS 필터</strong>: 모든 요청에 자동 적용되므로 성능 고려 필요</li><li><strong>토큰 만료</strong>: Access Token은 15분, Refresh Token은 7일</li><li><strong>복호화 필터</strong>: 필요한 경우에만 활성화</li></ol><h2 id="다음-단계" tabindex="-1">다음 단계 <a class="header-anchor" href="#다음-단계" aria-label="Permalink to &quot;다음 단계&quot;">​</a></h2><ul><li><a href="./../security/spring-security.html">Spring Security 설정</a></li><li><a href="./../security/jwt.html">JWT 인증</a></li><li><a href="./../security/filters.html">보안 필터</a></li><li><a href="./../security/encryption.html">암호화 유틸리티</a></li></ul>`,74)]))}const o=i(l,[["render",h]]);export{g as __pageData,o as default};
