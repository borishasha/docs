import{_ as a,c as i,o as e,aG as t}from"./chunks/framework.DytOxJW6.js";const d=JSON.parse('{"title":"JWT 인증","description":"","frontmatter":{},"headers":[],"relativePath":"core-features/auth/jwt.md","filePath":"core-features/auth/jwt.md"}'),n={name:"core-features/auth/jwt.md"};function h(l,s,k,r,p,o){return e(),i("div",null,s[0]||(s[0]=[t(`<h1 id="jwt-인증" tabindex="-1">JWT 인증 <a class="header-anchor" href="#jwt-인증" aria-label="Permalink to &quot;JWT 인증&quot;">​</a></h1><h2 id="개요" tabindex="-1">개요 <a class="header-anchor" href="#개요" aria-label="Permalink to &quot;개요&quot;">​</a></h2><p>프로젝트는 JWT(JSON Web Token) 기반 인증을 사용합니다. Access Token과 Refresh Token을 사용하여 인증을 관리합니다.</p><h2 id="토큰-구조" tabindex="-1">토큰 구조 <a class="header-anchor" href="#토큰-구조" aria-label="Permalink to &quot;토큰 구조&quot;">​</a></h2><h3 id="access-token" tabindex="-1">Access Token <a class="header-anchor" href="#access-token" aria-label="Permalink to &quot;Access Token&quot;">​</a></h3><ul><li><strong>저장 위치</strong>: <code>authStore.accessToken</code> (메모리)</li><li><strong>용도</strong>: API 요청 시 인증</li><li><strong>만료 시간</strong>: 짧음 (보통 15분~1시간)</li><li><strong>전송 방식</strong>: <code>Authorization: Bearer &lt;token&gt;</code> 헤더</li></ul><h3 id="refresh-token" tabindex="-1">Refresh Token <a class="header-anchor" href="#refresh-token" aria-label="Permalink to &quot;Refresh Token&quot;">​</a></h3><ul><li><strong>저장 위치</strong>: HttpOnly Cookie</li><li><strong>용도</strong>: Access Token 갱신</li><li><strong>만료 시간</strong>: 길음 (보통 7일~30일)</li><li><strong>전송 방식</strong>: Cookie (자동 전송)</li></ul><h2 id="인증-흐름" tabindex="-1">인증 흐름 <a class="header-anchor" href="#인증-흐름" aria-label="Permalink to &quot;인증 흐름&quot;">​</a></h2><h3 id="_1-로그인" tabindex="-1">1. 로그인 <a class="header-anchor" href="#_1-로그인" aria-label="Permalink to &quot;1. 로그인&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axiosInstance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  password: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (response.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;S&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Access Token 저장</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  authStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.data.accessToken)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Refresh Token은 쿠키에 자동 저장됨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-api-요청" tabindex="-1">2. API 요청 <a class="header-anchor" href="#_2-api-요청" aria-label="Permalink to &quot;2. API 요청&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CustomAxios.js의 요청 인터셉터에서 자동으로 토큰 추가</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authStore.accessToken</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (token) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  config.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Authorization&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`Bearer \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-토큰-갱신" tabindex="-1">3. 토큰 갱신 <a class="header-anchor" href="#_3-토큰-갱신" aria-label="Permalink to &quot;3. 토큰 갱신&quot;">​</a></h3><p>Access Token이 만료되면 자동으로 Refresh Token을 사용하여 갱신합니다.</p><h2 id="토큰-관리" tabindex="-1">토큰 관리 <a class="header-anchor" href="#토큰-관리" aria-label="Permalink to &quot;토큰 관리&quot;">​</a></h2><h3 id="access-token-설정" tabindex="-1">Access Token 설정 <a class="header-anchor" href="#access-token-설정" aria-label="Permalink to &quot;Access Token 설정&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useAuthStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/utils/stores/authStore.js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> authStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useAuthStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;new-token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="access-token-초기화" tabindex="-1">Access Token 초기화 <a class="header-anchor" href="#access-token-초기화" aria-label="Permalink to &quot;Access Token 초기화&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="인증-상태-확인" tabindex="-1">인증 상태 확인 <a class="header-anchor" href="#인증-상태-확인" aria-label="Permalink to &quot;인증 상태 확인&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isAuthenticated</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authStore.isAuthenticated)</span></span></code></pre></div><h2 id="보안-고려사항" tabindex="-1">보안 고려사항 <a class="header-anchor" href="#보안-고려사항" aria-label="Permalink to &quot;보안 고려사항&quot;">​</a></h2><ol><li><strong>Access Token</strong>: 메모리에만 저장 (localStorage 사용 안 함)</li><li><strong>Refresh Token</strong>: HttpOnly Cookie 사용 (XSS 공격 방지)</li><li><strong>HTTPS 사용</strong>: 프로덕션 환경에서는 반드시 HTTPS 사용</li><li><strong>토큰 만료</strong>: 적절한 만료 시간 설정</li></ol><h2 id="관련-문서" tabindex="-1">관련 문서 <a class="header-anchor" href="#관련-문서" aria-label="Permalink to &quot;관련 문서&quot;">​</a></h2><ul><li><a href="./token-refresh.html">토큰 갱신</a></li><li><a href="./../stores/auth.html">인증 스토어</a></li><li><a href="./../http/axios-instance.html">Axios 인스턴스</a></li></ul>`,26)]))}const g=a(n,[["render",h]]);export{d as __pageData,g as default};
