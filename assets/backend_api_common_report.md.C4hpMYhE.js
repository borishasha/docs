import{_ as i,c as a,o as n,aG as t}from"./chunks/framework.DytOxJW6.js";const c=JSON.parse('{"title":"리포트 생성 API","description":"","frontmatter":{},"headers":[],"relativePath":"backend/api/common/report.md","filePath":"backend/api/common/report.md"}'),l={name:"backend/api/common/report.md"};function e(p,s,h,o,r,k){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="리포트-생성-api" tabindex="-1">리포트 생성 API <a class="header-anchor" href="#리포트-생성-api" aria-label="Permalink to &quot;리포트 생성 API&quot;">​</a></h1><p>JasperReports를 사용하여 PDF, Excel, HTML 리포트를 생성하는 API입니다.</p><h2 id="기본-정보" tabindex="-1">기본 정보 <a class="header-anchor" href="#기본-정보" aria-label="Permalink to &quot;기본 정보&quot;">​</a></h2><ul><li><strong>Base URL</strong>: <code>/api/direct</code></li><li><strong>HTTP Method</strong>: <code>POST</code> (일부 GET)</li><li><strong>인증</strong>: JWT 토큰 필요 (일부 제외)</li></ul><h2 id="api-목록" tabindex="-1">API 목록 <a class="header-anchor" href="#api-목록" aria-label="Permalink to &quot;API 목록&quot;">​</a></h2><h3 id="_1-pdf-리포트-생성-파일-저장" tabindex="-1">1. PDF 리포트 생성 (파일 저장) <a class="header-anchor" href="#_1-pdf-리포트-생성-파일-저장" aria-label="Permalink to &quot;1. PDF 리포트 생성 (파일 저장)&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>/api/direct/report/pdfView</code></p><p><strong>설명:</strong> PDF 리포트를 생성하여 서버에 저장하고 파일명을 반환합니다. 생성된 파일은 10초 후 자동 삭제됩니다.</p><p><strong>요청 본문:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_report&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;REPORT_TEMPLATE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;procedure&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;P_REPORT_DATA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;params&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;V_P_PARAM1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;decrypt_column&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1:social_num|cv_3:emp_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_p_title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;리포트 제목&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_i_surl_cv_1/IMAGE_PATH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1/IMAGE_PATH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_i_url_logo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/resources/images/logo.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_convert_cv_1/cv_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1/cv_main&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>파라미터:</strong></p><h4 id="필수-파라미터" tabindex="-1">필수 파라미터 <a class="header-anchor" href="#필수-파라미터" aria-label="Permalink to &quot;필수 파라미터&quot;">​</a></h4><ul><li><code>jr_report</code> (String, 필수): 리포트 템플릿명 (<code>.jrxml</code> 확장자 제외) <ul><li>위치: <code>classpath:report/jasperForms/{jr_report}.jrxml</code></li></ul></li></ul><h4 id="데이터-조회-파라미터" tabindex="-1">데이터 조회 파라미터 <a class="header-anchor" href="#데이터-조회-파라미터" aria-label="Permalink to &quot;데이터 조회 파라미터&quot;">​</a></h4><ul><li><code>procedure</code> (String, 필수): 데이터 조회 프로시저명</li><li><code>params</code> (Map, 선택): 프로시저 파라미터</li></ul><h4 id="복호화-파라미터" tabindex="-1">복호화 파라미터 <a class="header-anchor" href="#복호화-파라미터" aria-label="Permalink to &quot;복호화 파라미터&quot;">​</a></h4><ul><li><code>decrypt_column</code> (String, 선택): 복호화할 컬럼 지정 <ul><li>형식: <code>{커서명}:{컬럼명}|{커서명}:{컬럼명}</code></li><li>예: <code>&quot;cv_1:social_num|cv_3:emp_name&quot;</code></li></ul></li></ul><h4 id="리포트-파라미터-jr-p" tabindex="-1">리포트 파라미터 (jr_p_*) <a class="header-anchor" href="#리포트-파라미터-jr-p" aria-label="Permalink to &quot;리포트 파라미터 (jr_p_*)&quot;">​</a></h4><ul><li><code>jr_p_*</code> (Any): 리포트 템플릿에서 사용할 일반 파라미터 <ul><li>예: <code>jr_p_title</code>, <code>jr_p_date</code> 등</li></ul></li></ul><h4 id="이미지-파라미터" tabindex="-1">이미지 파라미터 <a class="header-anchor" href="#이미지-파라미터" aria-label="Permalink to &quot;이미지 파라미터&quot;">​</a></h4><p><strong>서버 경로 이미지 (jr_i_surl_*)</strong></p><ul><li><code>jr_i_surl_{커서명}/{컬럼명}</code> (String): 서버 파일 시스템의 이미지 경로 <ul><li>예: <code>&quot;jr_i_surl_cv_1/IMAGE_PATH&quot;: &quot;cv_1/IMAGE_PATH&quot;</code></li><li>동작: 해당 컬럼의 경로에서 이미지를 읽어 byte로 변환</li></ul></li></ul><p><strong>웹 경로 이미지 (jr_i_url_*)</strong></p><ul><li><code>jr_i_url_*</code> (String): 웹앱 리소스 경로 <ul><li>예: <code>&quot;jr_i_url_logo&quot;: &quot;/resources/images/logo.png&quot;</code></li><li>동작: 웹 URL로 변환하여 리포트에 전달</li></ul></li></ul><h4 id="커서-변환-파라미터-jr-convert" tabindex="-1">커서 변환 파라미터 (jr_convert_*) <a class="header-anchor" href="#커서-변환-파라미터-jr-convert" aria-label="Permalink to &quot;커서 변환 파라미터 (jr_convert_*)&quot;">​</a></h4><ul><li><code>jr_convert_{원본커서}/{새커서명}</code> (String): 커서 복사 <ul><li>예: <code>&quot;jr_convert_cv_1/cv_main&quot;: &quot;cv_1/cv_main&quot;</code></li><li>동작: <code>cv_1</code> 커서를 <code>cv_main</code>이라는 이름으로 복사</li></ul></li></ul><p><strong>응답 예시 (성공):</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;S&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;fileName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;REPORT_abc123def456ghi789.pdf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pdf_생성_성공&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>응답 필드:</strong></p><ul><li><code>fileName</code> (String): 생성된 PDF 파일명</li><li><code>message</code> (String): 처리 결과 메시지</li></ul><p><strong>PDF 파일 접근:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GET /api/direct/report/open/{fileName}</span></span></code></pre></div><p><strong>사용 예시:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/direct/report/pdfView&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  jr_report: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HRA1600_REPORT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  procedure: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;P_HRA1600_Q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  params: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    V_P_USER_ID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;USER001&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    V_P_START_DATE: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;20240101&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    V_P_END_DATE: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;20241231&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  decrypt_column: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cv_1:social_num&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  jr_p_title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;급여 명세서&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  jr_p_date: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2024-01-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (response.data.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;S&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fileName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data.data.fileName;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // PDF 파일 열기</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/direct/report/open/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fileName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="_2-pdf-리포트-생성-바이너리-반환" tabindex="-1">2. PDF 리포트 생성 (바이너리 반환) <a class="header-anchor" href="#_2-pdf-리포트-생성-바이너리-반환" aria-label="Permalink to &quot;2. PDF 리포트 생성 (바이너리 반환)&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>/api/direct/report/pdfViewTest</code></p><p><strong>설명:</strong> PDF 리포트를 생성하여 바이너리로 직접 반환합니다.</p><p><strong>요청 본문:</strong> <code>pdfView</code>와 동일</p><p><strong>응답:</strong></p><ul><li><strong>Content-Type</strong>: <code>application/pdf</code></li><li><strong>Content-Disposition</strong>: <code>inline; filename=&quot;REPORT_*.pdf&quot;</code></li><li><strong>Body</strong>: PDF 바이너리</li></ul><p><strong>사용 예시:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/direct/report/pdfViewTest&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  jr_report: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;REPORT_TEMPLATE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... 파라미터</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  responseType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;blob&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// PDF를 새 창에서 열기</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([response.data], { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/pdf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url);</span></span></code></pre></div><hr><h3 id="_3-암호화된-pdf-생성" tabindex="-1">3. 암호화된 PDF 생성 <a class="header-anchor" href="#_3-암호화된-pdf-생성" aria-label="Permalink to &quot;3. 암호화된 PDF 생성&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>/api/direct/report/pdfViewEc</code></p><p><strong>설명:</strong> 암호화된 PDF 리포트를 생성합니다.</p><p><strong>요청 본문:</strong> <code>pdfView</code>와 동일</p><p><strong>암호화 설정:</strong></p><ul><li>비밀번호: &quot;1234&quot; (고정)</li><li>권한: 복사 및 인쇄 허용</li></ul><p><strong>응답:</strong> <code>pdfView</code>와 동일</p><hr><h3 id="_4-html-리포트-생성" tabindex="-1">4. HTML 리포트 생성 <a class="header-anchor" href="#_4-html-리포트-생성" aria-label="Permalink to &quot;4. HTML 리포트 생성&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>/api/direct/report/html</code></p><p><strong>설명:</strong> HTML 형식으로 리포트를 생성합니다.</p><p><strong>요청 본문:</strong> <code>pdfView</code>와 동일</p><p><strong>응답:</strong></p><ul><li><strong>Content-Type</strong>: <code>text/html; charset=UTF-8</code></li><li><strong>Body</strong>: HTML 스트림</li></ul><hr><h3 id="_5-excel-리포트-다운로드" tabindex="-1">5. Excel 리포트 다운로드 <a class="header-anchor" href="#_5-excel-리포트-다운로드" aria-label="Permalink to &quot;5. Excel 리포트 다운로드&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>/api/direct/report/excelDown</code></p><p><strong>설명:</strong> Excel 형식으로 리포트를 생성하여 다운로드합니다.</p><p><strong>요청 형식:</strong> <code>application/x-www-form-urlencoded</code> 또는 <code>multipart/form-data</code></p><p><strong>파라미터:</strong> <code>pdfView</code>와 동일 (Query Parameter 또는 Form Data)</p><p><strong>응답:</strong></p><ul><li><strong>Content-Type</strong>: <code>application/ms-excel; charset=UTF-8</code></li><li><strong>Content-Disposition</strong>: <code>attachment; filename=&quot;jasperReport.xls&quot;</code></li><li><strong>Body</strong>: Excel 바이너리 스트림</li></ul><hr><h3 id="_6-생성된-pdf-파일-조회" tabindex="-1">6. 생성된 PDF 파일 조회 <a class="header-anchor" href="#_6-생성된-pdf-파일-조회" aria-label="Permalink to &quot;6. 생성된 PDF 파일 조회&quot;">​</a></h3><p><strong>엔드포인트:</strong> <code>GET /api/direct/report/open/{fileName}</code></p><p><strong>설명:</strong> 서버에 저장된 PDF 파일을 조회합니다.</p><p><strong>파라미터:</strong></p><ul><li><code>fileName</code> (PathVariable, 필수): PDF 파일명</li></ul><p><strong>응답:</strong></p><ul><li><strong>Content-Type</strong>: <code>application/pdf</code></li><li><strong>Content-Disposition</strong>: <code>inline; filename=&quot;{fileName}&quot;</code></li><li><strong>Body</strong>: PDF 바이너리</li></ul><p><strong>사용 예시:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// PDF 파일 열기</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/direct/report/open/REPORT_abc123def456ghi789.pdf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><h2 id="리포트-파라미터-규칙" tabindex="-1">리포트 파라미터 규칙 <a class="header-anchor" href="#리포트-파라미터-규칙" aria-label="Permalink to &quot;리포트 파라미터 규칙&quot;">​</a></h2><h3 id="커서-파라미터" tabindex="-1">커서 파라미터 <a class="header-anchor" href="#커서-파라미터" aria-label="Permalink to &quot;커서 파라미터&quot;">​</a></h3><p>프로시저에서 반환하는 커서는 자동으로 리포트 파라미터로 전달됩니다.</p><ul><li><code>CV_1</code>, <code>CV_2</code>, ... → <code>cv_1</code>, <code>cv_2</code>, ... (소문자로 변환)</li><li><code>cv_count</code>는 제외</li></ul><h3 id="일반-파라미터" tabindex="-1">일반 파라미터 <a class="header-anchor" href="#일반-파라미터" aria-label="Permalink to &quot;일반 파라미터&quot;">​</a></h3><p><code>jr_p_</code>로 시작하는 키는 리포트 템플릿의 파라미터로 전달됩니다.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_p_title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;제목&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_p_date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>→ 리포트 템플릿에서 <code>$P{jr_p_title}</code>, <code>$P{jr_p_date}</code>로 사용</p><h3 id="이미지-파라미터-1" tabindex="-1">이미지 파라미터 <a class="header-anchor" href="#이미지-파라미터-1" aria-label="Permalink to &quot;이미지 파라미터&quot;">​</a></h3><h4 id="서버-경로-이미지" tabindex="-1">서버 경로 이미지 <a class="header-anchor" href="#서버-경로-이미지" aria-label="Permalink to &quot;서버 경로 이미지&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_i_surl_cv_1/IMAGE_PATH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1/IMAGE_PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>cv_1</code> 커서의 <code>IMAGE_PATH</code> 컬럼에 서버 파일 경로가 있는 경우</li><li>해당 경로의 이미지를 읽어 byte로 변환하여 리포트에 전달</li></ul><h4 id="웹-경로-이미지" tabindex="-1">웹 경로 이미지 <a class="header-anchor" href="#웹-경로-이미지" aria-label="Permalink to &quot;웹 경로 이미지&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_i_url_logo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/resources/images/logo.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>웹앱 리소스 경로를 전체 URL로 변환하여 전달</li></ul><h3 id="커서-변환" tabindex="-1">커서 변환 <a class="header-anchor" href="#커서-변환" aria-label="Permalink to &quot;커서 변환&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jr_convert_cv_1/cv_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1/cv_main&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>cv_1</code> 커서를 <code>cv_main</code>이라는 이름으로 복사</li><li>리포트 템플릿에서 <code>$P{cv_main}</code>으로 사용 가능</li></ul><h3 id="복호화" tabindex="-1">복호화 <a class="header-anchor" href="#복호화" aria-label="Permalink to &quot;복호화&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;decrypt_column&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cv_1:social_num|cv_3:emp_name&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>cv_1</code> 커서의 <code>social_num</code> 컬럼 복호화</li><li><code>cv_3</code> 커서의 <code>emp_name</code> 컬럼 복호화</li><li>AES-128로 복호화</li></ul><h2 id="리포트-템플릿-위치" tabindex="-1">리포트 템플릿 위치 <a class="header-anchor" href="#리포트-템플릿-위치" aria-label="Permalink to &quot;리포트 템플릿 위치&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/main/resources/report/jasperForms/{jr_report}.jrxml</span></span></code></pre></div><h2 id="한글-폰트" tabindex="-1">한글 폰트 <a class="header-anchor" href="#한글-폰트" aria-label="Permalink to &quot;한글 폰트&quot;">​</a></h2><p>한글 폰트는 다음 위치에 저장됩니다:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/main/resources/report/jasperfonts/</span></span></code></pre></div><p><strong>지원 폰트:</strong></p><ul><li>NanumGothic</li><li>MalgunGothic</li><li>Gothic A1</li></ul><h2 id="주의사항" tabindex="-1">주의사항 <a class="header-anchor" href="#주의사항" aria-label="Permalink to &quot;주의사항&quot;">​</a></h2><ol><li><strong>파일 자동 삭제</strong>: <code>pdfView</code>로 생성된 파일은 10초 후 자동 삭제됩니다.</li><li><strong>커서 키 변환</strong>: DB에서 반환된 <code>CV_*</code> 키는 소문자 <code>cv_*</code>로 변환됩니다.</li><li><strong>이미지 경로</strong>: 서버 경로 이미지는 절대 경로여야 합니다.</li><li><strong>복호화</strong>: <code>decrypt_column</code>에 지정된 컬럼만 복호화됩니다.</li></ol><h2 id="다음-단계" tabindex="-1">다음 단계 <a class="header-anchor" href="#다음-단계" aria-label="Permalink to &quot;다음 단계&quot;">​</a></h2><ul><li><a href="./ai.html">AI 서비스 API</a></li><li><a href="./sms.html">SMS 발송 API</a></li></ul>`,109)]))}const E=i(l,[["render",e]]);export{c as __pageData,E as default};
